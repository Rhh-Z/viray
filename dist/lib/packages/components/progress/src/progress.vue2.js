"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),z=require("./progress.js");require("../../../theme-chalk/src/progress.css");const E=require("../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isFunction.js"),v=require("../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isString.js"),D=["aria-valuenow"],N={class:"vi-progress-bar__outer"},P={viewBox:"0 0 100 100"},V=["d","stroke-width"],T=["d","stroke","opacity","stroke-linecap","stroke-width"],q={key:0},x=e.defineComponent({name:"ViProgess"}),I=e.defineComponent({...x,props:z.progressProps,setup(h){const r=h,y=e.computed(()=>({"vi-progress":!0,[`vi-progress--${r.type}`]:r.type,"vi-progress--text-inside":r.textInside,[`is-${r.status}`]:r.status})),$=e.computed(()=>({"vi-progress-bar__inner":!0,"vi-progress-bar__inner--indeterminate":r.indeterminate})),u=e.computed(()=>r.format(r.percentage)),p={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},S=e.computed(()=>r.status==="warning"?"warning-circle-fill":r.type==="line"?r.status==="success"?"check-circle-fill":"close-circle-fill":r.status==="success"?"check-circle":"close-circle"),d=e.computed(()=>r.type==="line"?12+r.strokeWidth*.3:r.width*.111111+2),c=e.computed(()=>(r.strokeWidth/r.width*100).toFixed(1)),f=e.computed(()=>["circle","dashboard"].includes(r.type)?Number.parseInt(`${50-Number.parseFloat(c.value)/2}`,10):0),m=e.computed(()=>{const t=f.value,s=r.type==="dashboard";return`
          M 50 50
          m 0 ${s?"":"-"}${t}
          a ${t} ${t} 0 1 1 0 ${s?"-":""}${t*2}
          a ${t} ${t} 0 1 1 0 ${s?"":"-"}${t*2}
          `}),a=e.computed(()=>2*Math.PI*f.value),i=e.computed(()=>r.type==="dashboard"?.75:1),k=e.computed(()=>`${-1*a.value*(1-i.value)/2}px`),B=e.computed(()=>({strokeDasharray:`${a.value*i.value}px, ${a.value}px`,strokeDashoffset:k.value})),w=e.computed(()=>({strokeDasharray:`${a.value*i.value*(r.percentage/100)}px, ${a.value}px`,strokeDashoffset:k.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),_=e.computed(()=>{let t;return r.color?t=g(r.percentage):t=p[r.status]||p.default,t}),b=e.computed(()=>({width:`${r.percentage}%`,animationDuration:`${r.duration}s`,backgroundColor:g(r.percentage)}));function C(t){const s=100/t.length;return t.map((o,n)=>v.default(o)?{color:o,percentage:(n+1)*s}:o).sort((o,n)=>o.percentage-n.percentage)}const g=t=>{var l;const{color:s}=r;if(E.default(s))return s(t);if(v.default(s))return s;{const o=C(s);for(const n of o)if(n.percentage>t)return n.color;return(l=o[o.length-1])==null?void 0:l.color}};return(t,s)=>{const l=e.resolveComponent("vi-icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(e.unref(y)),"aria-valuenow":t.percentage,role:"progressbar","aria-valuemin":"0","aria-valuemax":"100"},[t.type==="line"?(e.openBlock(),e.createElementBlock("div",{key:0,class:"vi-progress-bar",style:e.normalizeStyle({height:`${t.strokeWidth}px`})},[e.createElementVNode("div",N,[t.type==="line"?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref($)),style:e.normalizeStyle(e.unref(b))},[(t.showText||t.$slots.default)&&t.textInside?(e.openBlock(),e.createElementBlock("div",{key:0,class:"vi-progress-bar__innerText",style:e.normalizeStyle({fontSize:`${e.unref(d)}px`})},[e.renderSlot(t.$slots,"default",{percentage:t.percentage},()=>[e.createElementVNode("span",null,e.toDisplayString(e.unref(u)),1)])],4)):e.createCommentVNode("v-if",!0)],6)):e.createCommentVNode("v-if",!0)])],4)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"vi-progress vi-progress-circle",style:e.normalizeStyle({height:`${t.width}px`,width:`${t.width}px`})},[(e.openBlock(),e.createElementBlock("svg",P,[e.createElementVNode("path",{class:"vi-progress-circle vi-progress-track",d:e.unref(m),stroke:"#e5e9f2","stroke-width":e.unref(c),fill:"none",style:e.normalizeStyle(e.unref(B))},null,12,V),e.createElementVNode("path",{class:"vi-progress-circle vi-progress-path",d:e.unref(m),stroke:e.unref(_),fill:"none",opacity:t.percentage?1:0,"stroke-linecap":t.strokeLinecap,"stroke-width":e.unref(c),style:e.normalizeStyle(e.unref(w))},null,12,T)]))],4)),(t.showText||t.$slots.default)&&!t.textInside?(e.openBlock(),e.createElementBlock("div",{key:2,class:"vi-progress-bar__text",style:e.normalizeStyle({fontSize:`${e.unref(d)}px`})},[e.renderSlot(t.$slots,"default",{percentage:t.percentage},()=>[t.status?(e.openBlock(),e.createBlock(l,{key:1,name:e.unref(S)},null,8,["name"])):(e.openBlock(),e.createElementBlock("span",q,e.toDisplayString(e.unref(u)),1))])],4)):e.createCommentVNode("v-if",!0)],10,D)}}});exports.default=I;
