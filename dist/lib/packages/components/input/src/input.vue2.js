"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),N=require("./input.js");require("../../../theme-chalk/src/input.css");const _=require("../../../constants/events.js"),A=require("../../../utils/i18n.js"),R=require("../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isNil.js"),W={key:0,class:"vi-input__prepend"},j={key:0,class:"vi-input__prefix"},K={key:1,class:"vi-input__prefix"},G=["autofocus","type","value","autocomplete","aria-label","tabindex","maxlength","minlength","placeholder","disabled"],H={key:2,class:"vi-int__count"},J={class:"vi-input__count-inner"},Q={key:3},X={key:1,class:"vi-input__append"},Y=["readonly","placeholder","disabled","aria-label","tabindex","autofocus","autocomplete","minlength","maxlength"],Z=e.defineComponent({name:"ViInput"}),ee=e.defineComponent({...Z,props:N.inputProps,emits:N.inputEmits,setup(w,{expose:I,emit:t}){const n=w,p=e.useSlots(),s=e.ref(!1),r=e.ref(!1),u=e.ref(!1),i=e.ref(!1),P=e.computed(()=>v.value.length),c=e.shallowRef(),m=e.shallowRef(),d=e.computed(()=>c.value||m.value),f=async o=>{let{value:a}=o.target;t(_.UPDATE_MODEL_EVENT,a),t("input",a),await e.nextTick()},k=()=>{t(_.UPDATE_MODEL_EVENT,""),t("change",""),t("clear"),t("input","")},C=o=>{s.value=!0,t("focus",o)},b=o=>{s.value=!1,t("blur",o)},g=o=>{t("change",o.target.value)},x=o=>{r.value=!0,t("mouseenter",o)},S=o=>{r.value=!1,t("mouseenter",o)},$=o=>{i.value=!0,t("compositionstart",o)},M=o=>{var E;t("compositionupdate",o);const a=(E=o.target)==null?void 0:E.value,l=a[a.length-1]||"";i.value=!A.isKorean(l)},q=o=>{t("compositionend",o),i.value&&(i.value=!1,f(o))},v=e.computed(()=>R.default(n.modelValue)?"":String(n.modelValue)),h=e.computed(()=>n.clearable&&!n.disabled&&!n.readonly&&!!v.value&&(s.value||r.value)),D=e.computed(()=>!!p.suffix||!!n.clearable||h.value||n.showPassword||V.value),y=e.computed(()=>n.showPassword&&!n.disabled&&!n.readonly&&!!v.value&&(s.value||r.value)),V=e.computed(()=>n.showWordLimit&&(n.type==="text"||n.type==="textarea")&&!n.disabled&&!n.readonly&&!n.showPassword),L=()=>{u.value=!u.value,B()},B=async()=>{var o;(o=d.value)==null||o.focus()},T=e.computed(()=>n.type!=="textarea"?["vi-input",{[`vi-input--${n.size}`]:n.size}]:"vi-textarea"),z=e.computed(()=>({"vi-input__wrapper":!0,["is-prepend"]:p.prepend,["is-append"]:p.append})),F=e.computed(()=>({"is-disabled":n.disabled})),O=e.computed(()=>h.value||y.value?"vi-input__suffix":""),U=e.computed(()=>({["is-disabled"]:n.disabled}));return e.onMounted(()=>{var o;console.log((o=c.value)==null?void 0:o.blur())}),I({blur:()=>{var o;return(o=d.value)==null?void 0:o.blur()},focus:B,clear:k,ref:d,select:()=>{var o;(o=d.value)==null||o.select()},input:c,textarea:m}),(o,a)=>{const l=e.resolveComponent("vi-icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(e.unref(T)),onMouseenter:x,onMouseleave:S},[o.type!=="textarea"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createCommentVNode(" prepend slot "),o.$slots.prepend?(e.openBlock(),e.createElementBlock("div",W,[e.renderSlot(o.$slots,"prepend")])):e.createCommentVNode("v-if",!0),e.createElementVNode("div",{class:e.normalizeClass(e.unref(z))},[e.createCommentVNode(" prefix slot "),o.$slots.prefix?(e.openBlock(),e.createElementBlock("span",j,[e.renderSlot(o.$slots,"prefix")])):e.createCommentVNode("v-if",!0),e.createCommentVNode(" prefixIcon "),o.prefixIcon?(e.openBlock(),e.createElementBlock("span",K,[e.createVNode(l,{name:o.prefixIcon},null,8,["name"])])):e.createCommentVNode("v-if",!0),e.createElementVNode("input",e.mergeProps({class:"vi-input__inner",ref_key:"input",ref:c},o.$attrs,{autofocus:o.autofocus,type:o.showPassword?u.value?"text":"password":o.type,class:e.unref(F),value:o.modelValue,autocomplete:o.autocomplete,"aria-label":o.label,tabindex:o.tabindex,maxlength:o.maxlength,minlength:o.minlength,placeholder:o.placeholder,disabled:o.disabled,onInput:f,onFocus:C,onBlur:b,onChange:g}),null,16,G),e.createCommentVNode(" suffix slot "),e.unref(D)?(e.openBlock(),e.createElementBlock("span",{key:2,class:e.normalizeClass(e.unref(O))},[e.renderSlot(o.$slots,"suffix"),e.unref(h)?(e.openBlock(),e.createBlock(l,{key:0,name:"close-circle",onClick:k})):e.createCommentVNode("v-if",!0),e.unref(y)?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:L},[e.createVNode(l,{name:u.value?"eye":"eye-close"},null,8,["name"])])):e.createCommentVNode("v-if",!0),e.unref(V)?(e.openBlock(),e.createElementBlock("span",H,[e.createElementVNode("span",J,e.toDisplayString(e.unref(P))+"/"+e.toDisplayString(n.maxlength),1)])):e.createCommentVNode("v-if",!0)],2)):e.createCommentVNode("v-if",!0),e.createCommentVNode(" suffixIcon "),o.suffixIcon?(e.openBlock(),e.createElementBlock("span",Q,[e.createVNode(l,{name:o.suffixIcon},null,8,["name"])])):e.createCommentVNode("v-if",!0)],2),e.createCommentVNode(" append slot "),o.$slots.append?(e.openBlock(),e.createElementBlock("div",X,[e.renderSlot(o.$slots,"append")])):e.createCommentVNode("v-if",!0)],64)):(e.openBlock(),e.createElementBlock("textarea",e.mergeProps({key:1,class:["vi-textarea__inner",e.unref(U)],ref_key:"textarea",ref:m},o.$attrs,{readonly:o.readonly,placeholder:o.placeholder,disabled:o.disabled,"aria-label":o.label,tabindex:o.tabindex,autofocus:o.autofocus,autocomplete:o.autocomplete,minlength:o.minlength,maxlength:o.maxlength,onInput:f,onFocus:C,onBlur:b,onChange:g,onCompositionstart:$,onCompositionupdate:M,onCompositionend:q}),null,16,Y))],34)}}});exports.default=ee;
