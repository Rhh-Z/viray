"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),B=require("./input.js");require("../../../theme-chalk/src/input.css");const _=require("../../../constants/events.js"),U=require("../../../utils/i18n.js"),A=require("../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isNil.js"),R={key:0,class:"vi-input__prepend"},W={key:0,class:"vi-input__prefix"},j={key:1,class:"vi-input__prefix"},G=["autofocus","type","value","autocomplete","aria-label","tabindex","maxlength","placeholder","disabled"],H={key:2,class:"vi-int__count"},J={class:"vi-input__count-inner"},Q={key:3},X={key:1,class:"vi-input__append"},Y=["readonly","placeholder","disabled","aria-label","tabindex","autofocus","autocomplete"],Z=e.defineComponent({name:"ViInput"}),ee=e.defineComponent({...Z,props:B.inputProps,emits:B.inputEmits,setup(g,{emit:t}){const n=g,i=e.useSlots(),l=e.ref(!1),r=e.ref(!1),u=e.ref(!1),c=e.ref(!1),w=e.computed(()=>p.value.length),E=e.shallowRef(),f=e.shallowRef(),N=e.computed(()=>E.value||f.value),d=async o=>{let{value:a}=o.target;t(_.UPDATE_MODEL_EVENT,a),t("input",a),await e.nextTick()},I=()=>{t(_.UPDATE_MODEL_EVENT,""),t("change",""),t("clear"),t("input","")},v=o=>{l.value=!0,t("focus",o)},h=o=>{l.value=!1,t("blur",o)},k=o=>{t("change",o.target.value)},C=o=>{t("keydown",o)},x=o=>{r.value=!0,t("mouseenter",o)},P=o=>{r.value=!1,t("mouseenter",o)},S=o=>{c.value=!0,t("compositionstart",o)},$=o=>{var V;t("compositionupdate",o);const a=(V=o.target)==null?void 0:V.value,s=a[a.length-1]||"";c.value=!U.isKorean(s)},M=o=>{t("compositionend",o),c.value&&(c.value=!1,d(o))},p=e.computed(()=>A.default(n.modelValue)?"":String(n.modelValue)),m=e.computed(()=>n.clearable&&!n.disabled&&!n.readonly&&!!p.value&&(l.value||r.value)),T=e.computed(()=>!!i.suffix||!!n.clearable||m.value||n.showPassword||b.value),y=e.computed(()=>n.showPassword&&!n.disabled&&!n.readonly&&!!p.value&&(l.value||r.value)),b=e.computed(()=>n.showWordLimit&&(n.type==="text"||n.type==="textarea")&&!n.disabled&&!n.readonly&&!n.showPassword),q=()=>{u.value=!u.value,D()},D=async()=>{var o;await e.nextTick(),(o=N.value)==null||o.focus()},L=e.computed(()=>n.type!=="textarea"?"vi-input":"vi-textarea"),F=e.computed(()=>({"vi-input__wrapper":!0,["is-prepend"]:i.prepend,["is-append"]:i.append})),K=e.computed(()=>({"is-disabled":n.disabled})),z=e.computed(()=>m.value||y.value?"vi-input__suffix":""),O=e.computed(()=>({["is-disabled"]:n.disabled}));return(o,a)=>{const s=e.resolveComponent("vi-icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(e.unref(L)),onMouseenter:x,onMouseleave:P},[o.type!=="textarea"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createCommentVNode(" prepend slot "),o.$slots.prepend?(e.openBlock(),e.createElementBlock("div",R,[e.renderSlot(o.$slots,"prepend")])):e.createCommentVNode("v-if",!0),e.createElementVNode("div",{class:e.normalizeClass(e.unref(F))},[e.createCommentVNode(" prefix slot "),o.$slots.prefix?(e.openBlock(),e.createElementBlock("span",W,[e.renderSlot(o.$slots,"prefix")])):e.createCommentVNode("v-if",!0),e.createCommentVNode(" prefixIcon "),o.prefixIcon?(e.openBlock(),e.createElementBlock("span",j,[e.createVNode(s,{name:o.prefixIcon},null,8,["name"])])):e.createCommentVNode("v-if",!0),e.createElementVNode("input",e.mergeProps({class:"vi-input__inner"},o.$attrs,{autofocus:o.autofocus,type:o.showPassword?u.value?"text":"password":o.type,class:e.unref(K),value:o.modelValue,autocomplete:o.autocomplete,"aria-label":o.label,tabindex:o.tabindex,maxlength:o.maxlength,placeholder:o.placeholder,disabled:o.disabled,onInput:d,onFocus:v,onBlur:h,onChange:k,onKeydown:C}),null,16,G),e.createCommentVNode(" suffix slot "),e.unref(T)?(e.openBlock(),e.createElementBlock("span",{key:2,class:e.normalizeClass(e.unref(z))},[e.renderSlot(o.$slots,"suffix"),e.unref(m)?(e.openBlock(),e.createBlock(s,{key:0,name:"close-circle",onClick:I})):e.createCommentVNode("v-if",!0),e.unref(y)?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:q},[e.createVNode(s,{name:u.value?"eye":"eye-close"},null,8,["name"])])):e.createCommentVNode("v-if",!0),e.unref(b)?(e.openBlock(),e.createElementBlock("span",H,[e.createElementVNode("span",J,e.toDisplayString(e.unref(w))+"/"+e.toDisplayString(n.maxlength),1)])):e.createCommentVNode("v-if",!0)],2)):e.createCommentVNode("v-if",!0),e.createCommentVNode(" suffixIcon "),o.suffixIcon?(e.openBlock(),e.createElementBlock("span",Q,[e.createVNode(s,{name:o.suffixIcon},null,8,["name"])])):e.createCommentVNode("v-if",!0)],2),e.createCommentVNode(" append slot "),o.$slots.append?(e.openBlock(),e.createElementBlock("div",X,[e.renderSlot(o.$slots,"append")])):e.createCommentVNode("v-if",!0)],64)):(e.openBlock(),e.createElementBlock("textarea",e.mergeProps({key:1,class:["vi-textarea__inner",e.unref(O)],ref_key:"textarea",ref:f},o.$attrs,{readonly:o.readonly,placeholder:o.placeholder,disabled:o.disabled,"aria-label":o.label,tabindex:o.tabindex,autofocus:o.autofocus,autocomplete:o.autocomplete,onInput:d,onFocus:v,onBlur:h,onChange:k,onKeydown:C,onCompositionstart:S,onCompositionupdate:$,onCompositionend:M}),null,16,Y))],34)}}});exports.default=ee;
